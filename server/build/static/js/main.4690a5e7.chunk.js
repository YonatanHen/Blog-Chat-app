(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(23),o=a.n(r),c=a(8),i=a(9),l=a(11),d=a(10),h=a(26),j=a(13),b=a(7),u=a(86),p=a(51),O=a(85),m=a(88),x=a(1),f=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleUsername=function(e){n.setState({username:e.target.value})},n.handlePassword=function(e){n.setState({password:e.target.value})},n.handleEmail=function(e){n.setState({email:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.state.username,email:n.state.email,password:n.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.status?(console.log(e),alert(e.status)):(sessionStorage.setItem("username",e.username),sessionStorage.setItem("_id",e.id),console.log(e),n.setState({redirect:!0}))})).catch((function(e){console.log(e),alert("An error occured!")}))},n.state={redirect:!1,username:"",password:"",email:""},n.handleUsername=n.handleUsername.bind(Object(b.a)(n)),n.handlePassword=n.handlePassword.bind(Object(b.a)(n)),n.handleEmail=n.handleEmail.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.redirect?Object(x.jsx)(j.a,{to:{pathname:"/blog",props:{username:this.state.username}}}):Object(x.jsx)(O.a,{children:Object(x.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(x.jsxs)(m.a.Group,{controlId:"user-username",children:[Object(x.jsx)(m.a.Label,{children:"Username"}),Object(x.jsx)(m.a.Control,{type:"text",placeholder:"Enter username",value:this.state.username,onChange:this.handleUsername,required:!0})]}),Object(x.jsxs)(m.a.Group,{controlId:"user-email",children:[Object(x.jsx)(m.a.Label,{children:"Email address"}),Object(x.jsx)(m.a.Control,{type:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleEmail,required:!0}),Object(x.jsx)(m.a.Text,{style:{color:"#55633e"},children:"We'll never share your email with anyone else."})]}),Object(x.jsxs)(m.a.Group,{controlId:"user-password",children:[Object(x.jsx)(m.a.Label,{children:"Password"}),Object(x.jsx)(m.a.Control,{type:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handlePassword,required:!0})]}),Object(x.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})}}]),a}(s.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleUsername=function(e){n.setState({username:e.target.value})},n.handlePassword=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.state.username,password:n.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.username?(sessionStorage.setItem("username",e.username),sessionStorage.setItem("_id",e.id),n.setState({redirect:!0})):alert("Username/Password are not correct.")})).catch((function(e){alert(e)}))},n.state={redirect:!1,username:"",password:""},n.handleUsername=n.handleUsername.bind(Object(b.a)(n)),n.handlePassword=n.handlePassword.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.redirect?Object(x.jsx)(j.a,{to:{pathname:"/blog",props:{username:this.state.username}}}):Object(x.jsx)(O.a,{children:Object(x.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(x.jsxs)(m.a.Group,{controlId:"user-username",children:[Object(x.jsx)(m.a.Label,{children:"Username"}),Object(x.jsx)(m.a.Control,{type:"text",placeholder:"Enter username",value:this.state.username,onChange:this.handleUsername,required:!0})]}),Object(x.jsxs)(m.a.Group,{controlId:"user-password",children:[Object(x.jsx)(m.a.Label,{children:"Password"}),Object(x.jsx)(m.a.Control,{type:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handlePassword})]}),Object(x.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})}}]),a}(s.a.Component),y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSignInClick=function(){n.setState({showLogIn:!1})},n.onLogInClick=function(){n.setState({showLogIn:!0})},n.state={showLogIn:!0},n.onSignInClick=n.onSignInClick.bind(Object(b.a)(n)),n.onLogInClick=n.onLogInClick.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(u.a,{size:"lg",className:"main-btns","aria-label":"Basic example",children:[Object(x.jsx)(p.a,{className:this.state.showLogIn?"active-btn":"",onClick:this.onLogInClick,children:"Log-In"}),Object(x.jsx)(p.a,{className:this.state.showLogIn?"":"active-btn",onClick:this.onSignInClick,children:"Sign-In"})]}),this.state.showLogIn?Object(x.jsx)(g,{}):Object(x.jsx)(f,{})]})}}]),a}(s.a.Component),v=a(87),S=a(90),C=a(93),w=a(34),k=(a(71),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).UpdateLikes=function(){n.setState({clicked:!n.state.clicked,totalLikes:n.state.clicked?n.state.totalLikes&&n.state.clicked?n.state.totalLikes-1:n.state.totalLikes:n.state.totalLikes+1}),fetch("/posts/update-likes",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({postID:n.props._id,userID:sessionStorage.getItem("_id"),totalLikes:n.state.totalLikes})}).catch((function(e){return alert("An error occured!")}))},n.state={totalLikes:n.props.totalLikes,clicked:!1},console.log(sessionStorage.getItem("_id")),fetch("/posts/check-like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:sessionStorage.getItem("_id"),postID:n.props._id})}).then((function(e){return e.json()})).then((function(e){n.setState({clicked:e.value}),console.log(n.state.clicked)})).catch((function(e){return alert("An error occured!")})),n.UpdateLikes=n.UpdateLikes.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"Like",children:[Object(x.jsx)(w.b,{className:this.state.clicked?"clicked-like":"like-btn",onClick:this.UpdateLikes}),Object(x.jsxs)("span",{children:[" ",this.state.totalLikes]})]})}}]),a}(s.a.Component)),T=(a(72),0),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).deletePost=function(){fetch("/posts/".concat(n.props._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){404===e.status||500===e.status?alert(e.statusText):(alert("Post ".concat(n.props.title," deleted successfully.")),window.location.reload(!1))})).catch((function(e){alert(e)}))},n.redirectToUpdatePost=function(){n.setState({redirectToUpdate:!0})},n.userButtons=function(){return sessionStorage.getItem("_id")===n.props.author?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{variant:"secondary",size:"sm",onClick:n.redirectToUpdatePost,children:"Update Post"}),Object(x.jsx)(p.a,{variant:"danger",size:"sm",onClick:n.deletePost,children:"Delete Post"})]}):null},n.key=0,n.state={redirectToUpdate:!1},n.userButtons=n.userButtons.bind(Object(b.a)(n)),n.deletePost=n.deletePost.bind(Object(b.a)(n)),n.redirectToUpdatePost=n.redirectToUpdatePost.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.redirectToUpdate?Object(x.jsx)(j.a,{to:{pathname:"/updatePost",state:{_id:this.props._id,body:this.props.body,title:this.props.title}}}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(C.a,{className:"post-card",children:[Object(x.jsx)(C.a.Header,{children:Object(x.jsxs)(S.a.Toggle,{className:"post-btn",eventKey:(++T).toString(),children:[Object(x.jsx)("b",{children:this.props.authorName})," ","|"," ",this.props.title]})}),Object(x.jsx)(S.a.Collapse,{eventKey:T.toString(),children:Object(x.jsxs)(C.a.Body,{children:[Object(x.jsx)("p",{children:this.props.body}),Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"post-sub-btns",children:[this.userButtons(),Object(x.jsx)(k,{_id:this.props._id,author:this.props.author,totalLikes:this.props.likes})]})]})})]})})}}]),a}(s.a.Component),P=a(91),I=a(92),L=a(89),N=(a(73),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).RedirectToHomePage=function(){fetch("/logout/"+n.state.LoggedUser,{method:"GET"}).then(sessionStorage.removeItem("username"),n.setState({redirectHome:!0}))},n.handleRedirectToUpdateUser=function(){n.setState({redirectToUpdate:!0})},n.handleDeleteUser=function(){fetch("/delete/myuser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.state.LoggedUser})}).then(n.RedirectToHomePage()).catch((function(e){alert(e)}))},n.state={redirectHome:!1,redirectToUpdate:!1,LoggedUser:sessionStorage.getItem("username")},n.handleDeleteUser=n.handleDeleteUser.bind(Object(b.a)(n)),n.RedirectToHomePage=n.RedirectToHomePage.bind(Object(b.a)(n)),n.handleRedirectToUpdateUser=n.handleRedirectToUpdateUser.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.LoggedUser?this.state.redirectHome?Object(x.jsx)(j.a,{to:{pathname:"/"}}):this.state.redirectToUpdate?Object(x.jsx)(j.a,{to:{pathname:"/updateUser"}}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(P.a,{variant:"dark",children:[Object(x.jsx)(P.a.Brand,{href:"/blog",children:"Blog-App"}),Object(x.jsx)(I.a,{className:"mr-auto"}),Object(x.jsxs)(P.a.Collapse,{className:"justify-content-end",children:[Object(x.jsx)(P.a.Text,{children:"Signed in as:"}),Object(x.jsxs)(L.a,{title:this.state.LoggedUser,id:"nav-dropdown",children:[Object(x.jsx)(L.a.Item,{onClick:this.handleRedirectToUpdateUser,children:"Update user"}),Object(x.jsx)(L.a.Item,{onClick:this.handleDeleteUser,children:"Delete user"}),Object(x.jsx)(L.a.Item,{onClick:this.RedirectToHomePage,children:"Log-out"})]})]})]}),Object(x.jsx)("br",{})]}):Object(x.jsx)(j.a,{to:{pathname:"/authError"}})}}]),a}(s.a.Component)),E=(s.a.Component,a(75),a(76),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).redirectToAddPost=function(){n.props.history.push("/addPost")},n.state={posts:null},fetch("/posts/",{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({posts:e}),console.log(n.state.posts)})).catch((function(e){console.log(e),alert("An error occured!")})),n.redirectToAddPost=n.redirectToAddPost.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.posts?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{}),Object(x.jsxs)(O.a,{className:"text-center",children:[Object(x.jsxs)(v.a,{fluid:!0,children:[Object(x.jsx)("h1",{children:"Welcome!"}),Object(x.jsx)("p",{children:"In this blog you can share with the network everything you want!"})]}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)(p.a,{onClick:this.redirectToAddPost,children:"Add new post"})})]}),this.state.posts.map((function(e){return Object(x.jsx)(S.a,{children:Object(x.jsx)(U,{_id:e._id,body:e.body,author:e.author,authorName:e.authorName,title:e.title,likes:e.likes})})}))]}):Object(x.jsxs)("div",{id:"loading",children:["Loading",Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"dot"})]})}}]),a}(s.a.Component)),_=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(N,{}),Object(x.jsx)("h2",{children:"About"})]})}}]),a}(s.a.Component),A=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{}),Object(x.jsx)("h2",{children:"Chat"})]})}}]),a}(s.a.Component),D=(a(77),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("footer",{children:[Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"footer-elements d-flex justify-content-center",children:[Object(x.jsx)("p",{children:"Created By: Yehonatan Hen - \xa0"}),Object(x.jsx)("a",{href:"https://www.linkedin.com/in/yehonatan-hen/",target:"_blank",rel:"noopener noreferrer",children:Object(x.jsx)(w.c,{size:"25"})}),Object(x.jsx)("a",{href:"https://github.com/YehonatanHen",target:"_blank",rel:"noopener noreferrer",children:Object(x.jsx)(w.a,{size:"25"})})]})]})}}]),a}(s.a.Component));a(78);function B(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{children:"You are not authenticated!"}),Object(x.jsx)("a",{href:"/",children:"Log-in/Sign-in"})]})}var H=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleTitle=function(e){n.setState({title:e.target.value})},n.handleBody=function(e){n.setState({body:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),fetch("/add-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.state.title,body:n.state.body,author:sessionStorage.getItem("_id")})}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.status?alert(e.message):e._id?n.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){console.log(e),alert("An error occured!")}))},n.state={title:"",body:""},n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleTitle=n.handleTitle.bind(Object(b.a)(n)),n.handleBody=n.handleBody.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{}),Object(x.jsxs)(O.a,{children:[Object(x.jsx)("h1",{className:"text-center",children:"Add new post"}),Object(x.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(x.jsxs)(m.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(x.jsx)(m.a.Label,{children:"Title:"}),Object(x.jsx)(m.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(x.jsx)("br",{}),Object(x.jsx)(m.a.Label,{children:"body:"}),Object(x.jsx)(m.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)(p.a,{variant:"primary",type:"submit",children:"Add"})})]})]})]})}}]),a}(s.a.Component),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleTitle=function(e){n.setState({title:e.target.value})},n.handleBody=function(e){n.setState({body:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),fetch("/posts/update-post",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n.state.title,body:n.state.body,postID:n.props.location.state._id})}).then((function(e){return e.json()})).then((function(e){e._id?n.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){alert("An error occured!"+e)}))},n.state={title:n.props.location.state.title,body:n.props.location.state.body},n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleTitle=n.handleTitle.bind(Object(b.a)(n)),n.handleBody=n.handleBody.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{}),Object(x.jsxs)(O.a,{children:[Object(x.jsx)("h1",{className:"text-center",children:"Update post"}),Object(x.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(x.jsxs)(m.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(x.jsx)(m.a.Label,{children:"Title:"}),Object(x.jsx)(m.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(x.jsx)("br",{}),Object(x.jsx)(m.a.Label,{children:"body:"}),Object(x.jsx)(m.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)(p.a,{variant:"primary",type:"submit",children:"Update"})})]})]})]})}}]),a}(s.a.Component),F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleUsername=function(e){n.setState({username:e.target.value})},n.handlePassword=function(e){n.setState({password:e.target.value})},n.handlePasswordConfirmation=function(e){n.setState({passwordConfirmation:e.target.value})},n.handleEmail=function(e){n.setState({email:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),fetch("/update-user",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:sessionStorage.getItem("_id"),username:n.state.username,email:n.state.email,password:n.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.status?(console.log(e),alert(e.status)):n.state.password!==n.state.passwordConfirmation?(alert("Passwords don't match!"),window.location.reload(!1)):(sessionStorage.setItem("username",e.username),n.setState({redirect:!0}))})).catch((function(e){console.log(e),alert("An error occured!")}))},n.state={redirect:!1,username:sessionStorage.getItem("username"),password:"",passwordConfirmation:"",email:""},n.handleUsername=n.handleUsername.bind(Object(b.a)(n)),n.handlePassword=n.handlePassword.bind(Object(b.a)(n)),n.handlePasswordConfirmation=n.handlePasswordConfirmation.bind(Object(b.a)(n)),n.handleEmail=n.handleEmail.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.redirect?Object(x.jsx)(j.a,{to:{pathname:"/blog"}}):Object(x.jsxs)(O.a,{children:[Object(x.jsx)("h1",{className:"text-center",children:"Update user"}),Object(x.jsxs)(m.a,{onSubmit:this.handleSubmit,children:[Object(x.jsxs)(m.a.Group,{controlId:"user-username",children:[Object(x.jsx)(m.a.Label,{children:"Username"}),Object(x.jsx)(m.a.Control,{type:"text",value:this.state.username,onChange:this.handleUsername})]}),Object(x.jsxs)(m.a.Group,{controlId:"user-email",children:[Object(x.jsx)(m.a.Label,{children:"Email address"}),Object(x.jsx)(m.a.Control,{type:"email",value:this.state.email,onChange:this.handleEmail})]}),Object(x.jsxs)(m.a.Group,{controlId:"user-password",children:[Object(x.jsx)(m.a.Label,{children:"Password"}),Object(x.jsx)(m.a.Control,{type:"password",value:this.state.password,onChange:this.handlePassword,required:!0}),Object(x.jsx)(m.a.Label,{children:"Confirm password"}),Object(x.jsx)(m.a.Control,{type:"password",value:this.state.passwordConfirmation,onChange:this.handlePasswordConfirmation,required:!0})]}),Object(x.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(s.a.Component),J=(a(79),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{class:"app",children:[Object(x.jsx)(h.a,{children:Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{exact:!0,path:"/",component:y}),Object(x.jsx)(j.b,{path:"/blog",component:E}),Object(x.jsx)(j.b,{path:"/about",component:_}),Object(x.jsx)(j.b,{path:"/chat",component:A}),Object(x.jsx)(j.b,{path:"/addPost",component:H}),Object(x.jsx)(j.b,{path:"/updatePost",component:G}),Object(x.jsx)(j.b,{path:"/updateUser",component:F}),Object(x.jsx)(j.b,{path:"/authError",component:B})]})}),Object(x.jsx)("div",{className:"gap",children:Object(x.jsx)(D,{})})]})}}]),a}(s.a.Component));o.a.render(Object(x.jsx)(J,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.4690a5e7.chunk.js.map