(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{52:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(21),o=n.n(r),c=n(16),i=n(8),l=n(9),d=n(11),j=n(10),b=n(26),h=n(13),u=n(7),O=n(89),p=n(55),m=n(32),x=n(27),f=n(88),g=n(93),y=n(1),v=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),s=n[0],r=n[1],o=Object(a.useState)({username:"",password:"",email:""}),i=Object(x.a)(o,2),l=i[0],d=i[1],j=function(e){var t=e.target,n=t.name,a=t.value;d(Object(c.a)(Object(c.a)({},l),{},Object(m.a)({},n,a)))};return s?Object(y.jsx)(h.a,{to:{pathname:"/blog",props:{username:l.username}}}):Object(y.jsx)(f.a,{children:Object(y.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(c.a)({},l))}).then((function(e){return e.json()})).then((function(e){400===e.status?alert(e.message):(sessionStorage.setItem("username",e.username),sessionStorage.setItem("_id",e.id),r(!0))})).catch((function(e){console.log(e),alert("An error occured!")}))},children:[Object(y.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(y.jsx)(g.a.Label,{children:"Username"}),Object(y.jsx)(g.a.Control,{type:"text",placeholder:"Enter username",name:"username",onChange:j,required:!0})]}),Object(y.jsxs)(g.a.Group,{controlId:"user-email",children:[Object(y.jsx)(g.a.Label,{children:"Email address"}),Object(y.jsx)(g.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:j,required:!0}),Object(y.jsx)(g.a.Text,{style:{color:"#55633e"},children:"We'll never share your email with anyone else."})]}),Object(y.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(y.jsx)(g.a.Label,{children:"Password"}),Object(y.jsx)(g.a.Control,{type:"password",placeholder:"Enter password",name:"password",onChange:j,required:!0}),Object(y.jsx)(g.a.Text,{style:{color:"#55633e"},children:"Must include 6 characters"})]}),Object(y.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})},S=n(30),k="LOGIN_USER",C="LOGOUT_USER",w=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),s=n[0],r=n[1],o=Object(a.useState)({username:"",password:""}),i=Object(x.a)(o,2),l=i[0],d=i[1],j=function(e){var t=e.target,n=t.name,a=t.value;d(Object(c.a)(Object(c.a)({},l),{},Object(m.a)({},n,a)))},b=Object(S.b)(),u=Object(S.c)();return s?Object(y.jsx)(h.a,{to:{pathname:"/blog",props:{username:l.username}}}):Object(y.jsx)(f.a,{children:Object(y.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(c.a)({},l))}).then((function(e){return e.json()})).then((function(e){var t,n,a;e.username?(sessionStorage.setItem("username",l.username),sessionStorage.setItem("_id",e.id),localStorage.setItem("token",e.token),b((t=l.username,n=e.id,a=e.token,function(e){try{e({type:k,userData:{username:t,id:n,token:a}})}catch(s){throw new Error("error in login user!")}})),console.log(u.getState()),r(!0)):alert("Username/Password are not correct.")})).catch((function(e){alert(e)}))},children:[Object(y.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(y.jsx)(g.a.Label,{children:"Username"}),Object(y.jsx)(g.a.Control,{type:"text",name:"username",placeholder:"Enter username",onChange:j,required:!0})]}),Object(y.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(y.jsx)(g.a.Label,{children:"Password"}),Object(y.jsx)(g.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:j})]}),Object(y.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})},I=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onSignInClick=function(){a.setState({showLogIn:!1})},a.onLogInClick=function(){a.setState({showLogIn:!0})},a.state={showLogIn:!0},a.onSignInClick=a.onSignInClick.bind(Object(u.a)(a)),a.onLogInClick=a.onLogInClick.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(O.a,{size:"lg",className:"main-btns","aria-label":"Basic example",children:[Object(y.jsx)(p.a,{className:this.state.showLogIn?"active-btn":"",onClick:this.onLogInClick,children:"Log-In"}),Object(y.jsx)(p.a,{className:this.state.showLogIn?"":"active-btn",onClick:this.onSignInClick,children:"Sign-In"})]}),this.state.showLogIn?Object(y.jsx)(w,{}):Object(y.jsx)(v,{})]})}}]),n}(s.a.Component),T=n(90),L=n(91),P=n(54),N=n(94),U=n(95),E=n(92),_=(n(75),function(e){var t=Object(S.c)(),n=Object(a.useState)(!1),s=Object(x.a)(n,2),r=s[0],o=s[1],c=t.getState().username,i=function(){fetch("/logout/"+c,{method:"GET"}).then(sessionStorage.removeItem("username"),localStorage.removeItem("token"),o(!0))};return r?(console.log(t.getState()),Object(y.jsx)(h.a,{to:{pathname:"/"}})):Object(y.jsxs)(y.Fragment,{children:[console.log(t.getState()),Object(y.jsxs)(N.a,{variant:"dark",children:[Object(y.jsx)(N.a.Brand,{children:"Blog-App"}),Object(y.jsx)(U.a,{className:"mr-auto"}),Object(y.jsxs)(N.a.Collapse,{className:"justify-content-end",children:[Object(y.jsx)(N.a.Text,{children:"Signed in as:"}),Object(y.jsxs)(E.a,{title:c,id:"nav-dropdown",children:[Object(y.jsx)(E.a.Item,{children:Object(y.jsx)(b.b,{to:"./updateUser",className:"link",children:"Update user"})}),Object(y.jsx)(E.a.Item,{onClick:function(){fetch("/delete/myuser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),username:c})}).then(i()).catch((function(e){alert(e)}))},children:"Delete user"}),Object(y.jsx)(E.a.Item,{onClick:i,children:"Log-out"})]})]})]}),Object(y.jsx)("br",{})]})}),A=(n(52),n(77),n(96)),D=n(97),B=n(39),G=(n(78),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).UpdateLikes=function(){a.setState({clicked:!a.state.clicked,totalLikes:a.state.clicked?a.state.totalLikes&&a.state.clicked?a.state.totalLikes-1:a.state.totalLikes:a.state.totalLikes+1}),fetch("/posts/update-likes",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({postID:a.props._id,userID:sessionStorage.getItem("_id"),totalLikes:a.state.totalLikes})}).catch((function(e){return alert("An error occured!")}))},a.state={totalLikes:a.props.totalLikes,clicked:!1},fetch("/posts/check-like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:sessionStorage.getItem("_id"),postID:a.props._id})}).then((function(e){return e.json()})).then((function(e){a.setState({clicked:e.value})})).catch((function(e){return alert("An error occured!")})),a.UpdateLikes=a.UpdateLikes.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{className:"Like",children:[Object(y.jsx)(B.b,{className:this.state.clicked?"clicked-like":"like-btn",onClick:this.UpdateLikes}),Object(y.jsxs)("span",{children:[" ",this.state.totalLikes]})]})}}]),n}(s.a.Component)),F=(n(79),0),J=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).deletePost=function(){fetch("/posts/".concat(a.props._id),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then((function(e){404===e.status||500===e.status?alert(e.statusText):(alert("Post ".concat(a.props.title," deleted successfully.")),window.location.reload(!1))})).catch((function(e){alert(e)}))},a.redirectToUpdatePost=function(){a.setState({redirectToUpdate:!0})},a.userButtons=function(){return sessionStorage.getItem("_id")===a.props.author?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(p.a,{variant:"secondary",size:"sm",onClick:a.redirectToUpdatePost,children:"Update Post"}),Object(y.jsx)(p.a,{variant:"danger",size:"sm",onClick:a.deletePost,children:"Delete Post"})]}):null},a.key=0,a.state={redirectToUpdate:!1},a.userButtons=a.userButtons.bind(Object(u.a)(a)),a.deletePost=a.deletePost.bind(Object(u.a)(a)),a.redirectToUpdatePost=a.redirectToUpdatePost.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.redirectToUpdate?Object(y.jsx)(h.a,{to:{pathname:"/updatePost",state:{_id:this.props._id,body:this.props.body,title:this.props.title}}}):Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(D.a,{className:"post-card",children:[Object(y.jsx)(D.a.Header,{children:Object(y.jsxs)(A.a.Toggle,{className:"post-btn",eventKey:(++F).toString(),children:[Object(y.jsx)("b",{children:this.props.authorName})," ","|"," ",this.props.title]})}),Object(y.jsx)(A.a.Collapse,{eventKey:F.toString(),children:Object(y.jsxs)(D.a.Body,{children:[Object(y.jsx)("p",{children:this.props.body}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{className:"post-sub-btns",children:[this.userButtons(),Object(y.jsx)(G,{_id:this.props._id,author:this.props.author,totalLikes:this.props.likes})]})]})})]})})}}]),n}(s.a.Component),q=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(y.jsx)(y.Fragment,{children:this.props.postslist.filter((function(t){return t.title.includes(e.props.text)||t.body.includes(e.props.text)})).map((function(e){return Object(y.jsx)(A.a,{children:Object(y.jsx)(J,{_id:e._id,body:e.body,author:e.author,authorName:e.authorName,title:e.title,likes:e.likes})})}))})}}]),n}(s.a.Component),z=q,H=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).redirectToAddPost=function(){a.props.history.push("/addPost")},a.handleSearch=function(e){a.setState({text:e.target.value})},a.state={posts:null,text:""},fetch("/posts/",{method:"GET"}).then((function(e){return e.json()})).then((function(e){a.setState({posts:e})})).catch((function(e){console.log(e),alert("An error occured!")})),a.redirectToAddPost=a.redirectToAddPost.bind(Object(u.a)(a)),a.handleSearch=a.handleSearch.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.posts?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(f.a,{className:"text-center",children:[Object(y.jsxs)(T.a,{fluid:!0,children:[Object(y.jsx)("h1",{children:"Welcome!"}),Object(y.jsx)("p",{children:"In this blog you can share with the network everything you want!"})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(L.a,{size:"sm search",children:[Object(y.jsx)(L.a.Prepend,{className:"d-flex justify-content-center",children:Object(y.jsx)(L.a.Text,{children:"Search"})}),Object(y.jsx)(P.a,{"aria-label":"Small",placeholder:"Enter text here!",onChange:this.handleSearch})]}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)(p.a,{onClick:this.redirectToAddPost,children:"Add new post"})})]}),Object(y.jsx)(z,{postslist:this.state.posts,text:this.state.text})]}):Object(y.jsxs)("div",{id:"loading",children:["Loading",Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"dot"})]})}}]),n}(s.a.Component),Y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)("h2",{children:"About"})})}}]),n}(s.a.Component),K=Y,R=(s.a.Component,n(80),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("footer",{children:[Object(y.jsx)("hr",{}),Object(y.jsxs)("div",{className:"footer-elements d-flex justify-content-center",children:[Object(y.jsx)("p",{children:"Created By: Yehonatan Hen - \xa0"}),Object(y.jsx)("a",{href:"https://www.linkedin.com/in/yehonatan-hen/",target:"_blank",rel:"noopener noreferrer",children:Object(y.jsx)(B.c,{size:"25"})}),Object(y.jsx)("a",{href:"https://github.com/YehonatanHen",target:"_blank",rel:"noopener noreferrer",children:Object(y.jsx)(B.a,{size:"25"})})]})]})}}]),n}(s.a.Component)),W=R;n(81);function M(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:"You are not authenticated!"}),Object(y.jsx)("a",{href:"/",children:"Log-in/Sign-in"})]})}var Q=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleTitle=function(e){a.setState({title:e.target.value})},a.handleBody=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/add-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),title:a.state.title,body:a.state.body,author:sessionStorage.getItem("_id")})}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.status?alert(e.message):e._id?a.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){console.log(e),alert("An error occured!")}))},a.state={title:"",body:""},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTitle=a.handleTitle.bind(Object(u.a)(a)),a.handleBody=a.handleBody.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(f.a,{children:[Object(y.jsx)("h1",{className:"text-center",children:"Add new post"}),Object(y.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(y.jsxs)(g.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(y.jsx)(g.a.Label,{children:"Title:"}),Object(y.jsx)(g.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a.Label,{children:"body:"}),Object(y.jsx)(g.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)(p.a,{variant:"primary",type:"submit",children:"Add"})})]})]})})}}]),n}(s.a.Component),V=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleTitle=function(e){a.setState({title:e.target.value})},a.handleBody=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/posts/update-post",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),title:a.state.title,body:a.state.body,postID:a.props.location.state._id})}).then((function(e){return e.json()})).then((function(e){e._id?a.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){alert("An error occured!"+e)}))},a.state={title:a.props.location.state.title,body:a.props.location.state.body},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTitle=a.handleTitle.bind(Object(u.a)(a)),a.handleBody=a.handleBody.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(f.a,{children:[Object(y.jsx)("h1",{className:"text-center",children:"Update post"}),Object(y.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(y.jsxs)(g.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(y.jsx)(g.a.Label,{children:"Title:"}),Object(y.jsx)(g.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a.Label,{children:"body:"}),Object(y.jsx)(g.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:Object(y.jsx)(p.a,{variant:"primary",type:"submit",children:"Update"})})]})]})})}}]),n}(s.a.Component),X=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleUsername=function(e){a.setState({username:e.target.value})},a.handlePassword=function(e){a.setState({password:e.target.value})},a.handlePasswordConfirmation=function(e){a.setState({passwordConfirmation:e.target.value})},a.handleEmail=function(e){a.setState({email:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/update-user",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),userID:sessionStorage.getItem("_id"),username:a.state.username,email:a.state.email,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),400===e.status?(console.log(e),alert(e.status)):a.state.password!==a.state.passwordConfirmation?(alert("Passwords don't match!"),window.location.reload(!1)):(sessionStorage.setItem("username",e.username),a.setState({redirect:!0}))})).catch((function(e){console.log(e),alert("An error occured!")}))},a.state={redirect:!1,username:sessionStorage.getItem("username"),password:"",passwordConfirmation:"",email:""},a.handleUsername=a.handleUsername.bind(Object(u.a)(a)),a.handlePassword=a.handlePassword.bind(Object(u.a)(a)),a.handlePasswordConfirmation=a.handlePasswordConfirmation.bind(Object(u.a)(a)),a.handleEmail=a.handleEmail.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(y.jsx)(h.a,{to:{pathname:"/blog"}}):Object(y.jsxs)(f.a,{children:[Object(y.jsx)("h1",{className:"text-center",children:"Update user"}),Object(y.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(y.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(y.jsx)(g.a.Label,{children:"Username"}),Object(y.jsx)(g.a.Control,{type:"text",value:this.state.username,onChange:this.handleUsername})]}),Object(y.jsxs)(g.a.Group,{controlId:"user-email",children:[Object(y.jsx)(g.a.Label,{children:"Email address"}),Object(y.jsx)(g.a.Control,{type:"email",value:this.state.email,onChange:this.handleEmail})]}),Object(y.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(y.jsx)(g.a.Label,{children:"Password"}),Object(y.jsx)(g.a.Control,{type:"password",value:this.state.password,onChange:this.handlePassword,required:!0}),Object(y.jsx)(g.a.Label,{children:"Confirm password"}),Object(y.jsx)(g.a.Control,{type:"password",value:this.state.passwordConfirmation,onChange:this.handlePasswordConfirmation,required:!0})]}),Object(y.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),n}(s.a.Component),Z=(n(82),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{className:"app",children:[Object(y.jsx)(b.a,{children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{exact:!0,path:"/",component:I}),Object(y.jsx)(h.b,{path:"/authError",component:M}),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(_,{}),Object(y.jsx)(h.b,{path:"/blog",render:function(e){return Object(y.jsx)(H,Object(c.a)({},e))}}),Object(y.jsx)(h.b,{path:"/about",render:function(e){return Object(y.jsx)(K,Object(c.a)({},e))}}),Object(y.jsx)(h.b,{path:"/addPost",render:function(e){return Object(y.jsx)(Q,Object(c.a)({},e))}}),Object(y.jsx)(h.b,{path:"/updatePost",render:function(e){return Object(y.jsx)(V,Object(c.a)({},e))}}),Object(y.jsx)(h.b,{path:"/updateUser",render:function(e){return Object(y.jsx)(X,Object(c.a)({},e))}})]})]})}),Object(y.jsx)("div",{className:"gap",children:Object(y.jsx)(W,{})})]})}}]),n}(s.a.Component)),$=n(50),ee={username:void 0,id:void 0,token:void 0},te=n(59),ne=Object($.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(c.a)(Object(c.a)({},e),{},{username:t.userData.username,id:t.userData.id,token:t.userData.token});case C:return Object(c.a)({},ee)}return e}),Object($.a)(te.a));o.a.render(Object(y.jsx)(S.a,{store:ne,children:Object(y.jsx)(Z,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.575b899e.chunk.js.map