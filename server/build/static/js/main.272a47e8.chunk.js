(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{52:function(e,t,n){},75:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(21),c=n.n(r),o=n(16),i=n(8),l=n(9),d=n(11),j=n(10),b=n(26),h=n(13),u=n(7),O=n(89),p=n(56),m=n(32),x=n(28),f=n(88),g=n(93),y=n(27),v="LOGIN_USER",S="LOGOUT_USER",k=function(e,t,n){return function(a){try{a({type:v,userData:{username:e,id:t,token:n}})}catch(s){throw new Error("error in login user!")}}},C=n(1),w=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)({username:"",password:"",email:""}),i=Object(x.a)(c,2),l=i[0],d=i[1],j=function(e){var t=e.target,n=t.name,a=t.value;d(Object(o.a)(Object(o.a)({},l),{},Object(m.a)({},n,a)))},b=Object(y.b)();return s?Object(C.jsx)(h.a,{to:{pathname:"/blog",props:{username:l.username}}}):Object(C.jsx)(f.a,{children:Object(C.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),fetch("/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(o.a)({},l))}).then((function(e){return e.json()})).then((function(e){400===e.status?alert(e.message):(sessionStorage.setItem("username",e.username),sessionStorage.setItem("_id",e.id),localStorage.setItem("token",e.token),b(k(l.username,e.id,e.token)),r(!0))})).catch((function(e){alert("An error occured!")}))},children:[Object(C.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(C.jsx)(g.a.Label,{children:"Username"}),Object(C.jsx)(g.a.Control,{type:"text",placeholder:"Enter username",name:"username",onChange:j,required:!0})]}),Object(C.jsxs)(g.a.Group,{controlId:"user-email",children:[Object(C.jsx)(g.a.Label,{children:"Email address"}),Object(C.jsx)(g.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:j,required:!0}),Object(C.jsx)(g.a.Text,{style:{color:"#55633e"},children:"We'll never share your email with anyone else."})]}),Object(C.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(C.jsx)(g.a.Label,{children:"Password"}),Object(C.jsx)(g.a.Control,{type:"password",placeholder:"Enter password",name:"password",onChange:j,required:!0}),Object(C.jsx)(g.a.Text,{style:{color:"#55633e"},children:"Must include 6 characters"})]}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})},I=function(e){var t=Object(a.useState)(!1),n=Object(x.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)({username:"",password:""}),i=Object(x.a)(c,2),l=i[0],d=i[1],j=function(e){var t=e.target,n=t.name,a=t.value;d(Object(o.a)(Object(o.a)({},l),{},Object(m.a)({},n,a)))},b=Object(y.b)();return s?Object(C.jsx)(h.a,{to:{pathname:"/blog",props:{username:l.username}}}):Object(C.jsx)(f.a,{children:Object(C.jsxs)(g.a,{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(o.a)({},l))}).then((function(e){return e.json()})).then((function(e){e.username?(sessionStorage.setItem("username",l.username),sessionStorage.setItem("_id",e.id),localStorage.setItem("token",e.token),b(k(l.username,e.id,e.token)),r(!0)):alert("Username/Password are not correct.")})).catch((function(e){alert(e)}))},children:[Object(C.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(C.jsx)(g.a.Label,{children:"Username"}),Object(C.jsx)(g.a.Control,{type:"text",name:"username",placeholder:"Enter username",onChange:j,required:!0})]}),Object(C.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(C.jsx)(g.a.Label,{children:"Password"}),Object(C.jsx)(g.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:j})]}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})},T=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onSignInClick=function(){a.setState({showLogIn:!1})},a.onLogInClick=function(){a.setState({showLogIn:!0})},a.state={showLogIn:!0},a.onSignInClick=a.onSignInClick.bind(Object(u.a)(a)),a.onLogInClick=a.onLogInClick.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(O.a,{size:"lg",className:"main-btns","aria-label":"Basic example",children:[Object(C.jsx)(p.a,{className:this.state.showLogIn?"active-btn":"",onClick:this.onLogInClick,children:"Log-In"}),Object(C.jsx)(p.a,{className:this.state.showLogIn?"":"active-btn",onClick:this.onSignInClick,children:"Sign-In"})]}),this.state.showLogIn?Object(C.jsx)(I,{}):Object(C.jsx)(w,{})]})}}]),n}(s.a.Component),L=n(90),P=n(91),N=n(55),U=n(94),E=n(95),_=n(92),A=(n(75),function(e){var t=Object(y.c)(),n=Object(a.useState)(!1),s=Object(x.a)(n,2),r=s[0],c=s[1],o=t.getState().username,i=function(){fetch("/logout/"+o,{method:"GET"}).then(sessionStorage.removeItem("username"),localStorage.removeItem("token"),c(!0))};return r?Object(C.jsx)(h.a,{to:{pathname:"/"}}):Object(C.jsxs)(C.Fragment,{children:[console.log(t.getState()),Object(C.jsxs)(U.a,{variant:"dark",children:[Object(C.jsx)(U.a.Brand,{children:"Blog-App"}),Object(C.jsx)(E.a,{className:"mr-auto"}),Object(C.jsxs)(U.a.Collapse,{className:"justify-content-end",children:[Object(C.jsx)(U.a.Text,{children:"Signed in as:"}),Object(C.jsxs)(_.a,{title:o,id:"nav-dropdown",children:[Object(C.jsx)(_.a.Item,{children:Object(C.jsx)(b.b,{to:"./updateUser",className:"link",children:"Update user"})}),Object(C.jsx)(_.a.Item,{onClick:function(){fetch("/delete/myuser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),username:o})}).then(i()).catch((function(e){alert(e)}))},children:"Delete user"}),Object(C.jsx)(_.a.Item,{onClick:i,children:"Log-out"})]})]})]}),Object(C.jsx)("br",{})]})}),D=(n(52),n(77),n(96)),B=n(97),G=n(39),F=(n(78),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).UpdateLikes=function(){a.setState({clicked:!a.state.clicked,totalLikes:a.state.clicked?a.state.totalLikes&&a.state.clicked?a.state.totalLikes-1:a.state.totalLikes:a.state.totalLikes+1}),fetch("/posts/update-likes",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({postID:a.props._id,userID:sessionStorage.getItem("_id"),totalLikes:a.state.totalLikes})}).catch((function(e){return alert("An error occured!")}))},a.state={totalLikes:a.props.totalLikes,clicked:!1},fetch("/posts/check-like",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:sessionStorage.getItem("_id"),postID:a.props._id})}).then((function(e){return e.json()})).then((function(e){a.setState({clicked:e.value})})).catch((function(e){return alert("An error occured!")})),a.UpdateLikes=a.UpdateLikes.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"Like",children:[Object(C.jsx)(G.b,{className:this.state.clicked?"clicked-like":"like-btn",onClick:this.UpdateLikes}),Object(C.jsxs)("span",{children:[" ",this.state.totalLikes]})]})}}]),n}(s.a.Component)),J=(n(79),0),q=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).deletePost=function(){fetch("/posts/".concat(a.props._id),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})}).then((function(e){404===e.status||500===e.status?alert(e.statusText):(alert("Post ".concat(a.props.title," deleted successfully.")),window.location.reload(!1))})).catch((function(e){alert(e)}))},a.redirectToUpdatePost=function(){a.setState({redirectToUpdate:!0})},a.userButtons=function(){return sessionStorage.getItem("_id")===a.props.author?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a,{variant:"secondary",size:"sm",onClick:a.redirectToUpdatePost,children:"Update Post"}),Object(C.jsx)(p.a,{variant:"danger",size:"sm",onClick:a.deletePost,children:"Delete Post"})]}):null},a.key=0,a.state={redirectToUpdate:!1},a.userButtons=a.userButtons.bind(Object(u.a)(a)),a.deletePost=a.deletePost.bind(Object(u.a)(a)),a.redirectToUpdatePost=a.redirectToUpdatePost.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.redirectToUpdate?Object(C.jsx)(h.a,{to:{pathname:"/updatePost",state:{_id:this.props._id,body:this.props.body,title:this.props.title}}}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(B.a,{className:"post-card",children:[Object(C.jsx)(B.a.Header,{children:Object(C.jsxs)(D.a.Toggle,{className:"post-btn",eventKey:(++J).toString(),children:[Object(C.jsx)("b",{children:this.props.authorName})," ","|"," ",this.props.title]})}),Object(C.jsx)(D.a.Collapse,{eventKey:J.toString(),children:Object(C.jsxs)(B.a.Body,{children:[Object(C.jsx)("p",{children:this.props.body}),Object(C.jsx)("br",{}),Object(C.jsxs)("div",{className:"post-sub-btns",children:[this.userButtons(),Object(C.jsx)(F,{_id:this.props._id,author:this.props.author,totalLikes:this.props.likes})]})]})})]})})}}]),n}(s.a.Component),z=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsx)(C.Fragment,{children:this.props.postslist.filter((function(t){return t.title.includes(e.props.text)||t.body.includes(e.props.text)})).map((function(e){return Object(C.jsx)(D.a,{children:Object(C.jsx)(q,{_id:e._id,body:e.body,author:e.author,authorName:e.authorName,title:e.title,likes:e.likes})})}))})}}]),n}(s.a.Component),H=z,Y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).redirectToAddPost=function(){a.props.history.push("/addPost")},a.handleSearch=function(e){a.setState({text:e.target.value})},a.state={posts:null,text:""},fetch("/posts/",{method:"GET"}).then((function(e){return e.json()})).then((function(e){a.setState({posts:e})})).catch((function(e){alert("An error occured!")})),a.redirectToAddPost=a.redirectToAddPost.bind(Object(u.a)(a)),a.handleSearch=a.handleSearch.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.posts?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(f.a,{className:"text-center",children:[Object(C.jsxs)(L.a,{fluid:!0,children:[Object(C.jsx)("h1",{children:"Welcome!"}),Object(C.jsx)("p",{children:"In this blog you can share with the network everything you want!"})]}),Object(C.jsx)("br",{}),Object(C.jsxs)(P.a,{size:"sm search",children:[Object(C.jsx)(P.a.Prepend,{className:"d-flex justify-content-center",children:Object(C.jsx)(P.a.Text,{children:"Search"})}),Object(C.jsx)(N.a,{"aria-label":"Small",placeholder:"Enter text here!",onChange:this.handleSearch})]}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"d-flex justify-content-center",children:Object(C.jsx)(p.a,{onClick:this.redirectToAddPost,children:"Add new post"})})]}),Object(C.jsx)(H,{postslist:this.state.posts,text:this.state.text})]}):Object(C.jsxs)("div",{id:"loading",children:["Loading",Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"dot"})]})}}]),n}(s.a.Component),K=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)("h2",{children:"About"})})}}]),n}(s.a.Component),R=K,W=(s.a.Component,n(80),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("footer",{children:[Object(C.jsx)("hr",{}),Object(C.jsxs)("div",{className:"footer-elements d-flex justify-content-center",children:[Object(C.jsx)("p",{children:"Created By: Yehonatan Hen - \xa0"}),Object(C.jsx)("a",{href:"https://www.linkedin.com/in/yehonatan-hen/",target:"_blank",rel:"noopener noreferrer",children:Object(C.jsx)(G.c,{size:"25"})}),Object(C.jsx)("a",{href:"https://github.com/YehonatanHen",target:"_blank",rel:"noopener noreferrer",children:Object(C.jsx)(G.a,{size:"25"})})]})]})}}]),n}(s.a.Component)),M=W;n(81);function Q(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"You are not authenticated!"}),Object(C.jsx)("a",{href:"/",children:"Log-in/Sign-in"})]})}var V=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleTitle=function(e){a.setState({title:e.target.value})},a.handleBody=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/add-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),title:a.state.title,body:a.state.body,author:sessionStorage.getItem("_id")})}).then((function(e){return e.json()})).then((function(e){400===e.status?alert(e.message):e._id?a.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){alert("An error occured!")}))},a.state={title:"",body:""},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTitle=a.handleTitle.bind(Object(u.a)(a)),a.handleBody=a.handleBody.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(f.a,{children:[Object(C.jsx)("h1",{className:"text-center",children:"Add new post"}),Object(C.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(g.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(C.jsx)(g.a.Label,{children:"Title:"}),Object(C.jsx)(g.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(C.jsx)("br",{}),Object(C.jsx)(g.a.Label,{children:"body:"}),Object(C.jsx)(g.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"d-flex justify-content-center",children:Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Add"})})]})]})})}}]),n}(s.a.Component),X=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleTitle=function(e){a.setState({title:e.target.value})},a.handleBody=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/posts/update-post",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),title:a.state.title,body:a.state.body,postID:a.props.location.state._id})}).then((function(e){return e.json()})).then((function(e){e._id?a.props.history.push({pathname:"/blog"}):alert(e.message)})).catch((function(e){alert("An error occured!"+e)}))},a.state={title:a.props.location.state.title,body:a.props.location.state.body},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTitle=a.handleTitle.bind(Object(u.a)(a)),a.handleBody=a.handleBody.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(f.a,{children:[Object(C.jsx)("h1",{className:"text-center",children:"Update post"}),Object(C.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(g.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(C.jsx)(g.a.Label,{children:"Title:"}),Object(C.jsx)(g.a.Control,{as:"textarea",rows:1,value:this.state.title,onChange:this.handleTitle}),Object(C.jsx)("br",{}),Object(C.jsx)(g.a.Label,{children:"body:"}),Object(C.jsx)(g.a.Control,{as:"textarea",rows:5,value:this.state.body,onChange:this.handleBody})]}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"d-flex justify-content-center",children:Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Update"})})]})]})})}}]),n}(s.a.Component),Z=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleUsername=function(e){a.setState({username:e.target.value})},a.handlePassword=function(e){a.setState({password:e.target.value})},a.handlePasswordConfirmation=function(e){a.setState({passwordConfirmation:e.target.value})},a.handleEmail=function(e){a.setState({email:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),fetch("/update-user",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token"),userID:sessionStorage.getItem("_id"),username:a.state.username,email:a.state.email,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){400===e.status?alert(e.status):a.state.password!==a.state.passwordConfirmation?(alert("Passwords don't match!"),window.location.reload(!1)):(sessionStorage.setItem("username",e.username),a.setState({redirect:!0}))})).catch((function(e){alert("An error occured!")}))},a.state={redirect:!1,username:sessionStorage.getItem("username"),password:"",passwordConfirmation:"",email:""},a.handleUsername=a.handleUsername.bind(Object(u.a)(a)),a.handlePassword=a.handlePassword.bind(Object(u.a)(a)),a.handlePasswordConfirmation=a.handlePasswordConfirmation.bind(Object(u.a)(a)),a.handleEmail=a.handleEmail.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(C.jsx)(h.a,{to:{pathname:"/blog"}}):Object(C.jsxs)(f.a,{children:[Object(C.jsx)("h1",{className:"text-center",children:"Update user"}),Object(C.jsxs)(g.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(g.a.Group,{controlId:"user-username",children:[Object(C.jsx)(g.a.Label,{children:"Username"}),Object(C.jsx)(g.a.Control,{type:"text",value:this.state.username,onChange:this.handleUsername})]}),Object(C.jsxs)(g.a.Group,{controlId:"user-email",children:[Object(C.jsx)(g.a.Label,{children:"Email address"}),Object(C.jsx)(g.a.Control,{type:"email",value:this.state.email,onChange:this.handleEmail})]}),Object(C.jsxs)(g.a.Group,{controlId:"user-password",children:[Object(C.jsx)(g.a.Label,{children:"Password"}),Object(C.jsx)(g.a.Control,{type:"password",value:this.state.password,onChange:this.handlePassword,required:!0}),Object(C.jsx)(g.a.Label,{children:"Confirm password"}),Object(C.jsx)(g.a.Control,{type:"password",value:this.state.passwordConfirmation,onChange:this.handlePasswordConfirmation,required:!0})]}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),n}(s.a.Component),$=(n(82),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"app",children:[Object(C.jsx)(b.a,{children:Object(C.jsxs)(h.d,{children:[Object(C.jsx)(h.b,{exact:!0,path:"/",component:T}),Object(C.jsx)(h.b,{path:"/authError",component:Q}),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(A,{}),Object(C.jsx)(h.b,{path:"/blog",render:function(e){return Object(C.jsx)(Y,Object(o.a)({},e))}}),Object(C.jsx)(h.b,{path:"/about",render:function(e){return Object(C.jsx)(R,Object(o.a)({},e))}}),Object(C.jsx)(h.b,{path:"/addPost",render:function(e){return Object(C.jsx)(V,Object(o.a)({},e))}}),Object(C.jsx)(h.b,{path:"/updatePost",render:function(e){return Object(C.jsx)(X,Object(o.a)({},e))}}),Object(C.jsx)(h.b,{path:"/updateUser",render:function(e){return Object(C.jsx)(Z,Object(o.a)({},e))}})]})]})}),Object(C.jsx)("div",{className:"gap",children:Object(C.jsx)(M,{})})]})}}]),n}(s.a.Component)),ee=n(50),te={username:void 0,id:void 0,token:void 0},ne=n(59),ae=Object(ee.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(o.a)(Object(o.a)({},e),{},{username:t.userData.username,id:t.userData.id,token:t.userData.token});case S:return Object(o.a)({},te)}return e}),Object(ee.a)(ne.a));c.a.render(Object(C.jsx)(y.a,{store:ae,children:Object(C.jsx)($,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.272a47e8.chunk.js.map